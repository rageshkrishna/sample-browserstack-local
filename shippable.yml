language: node_js
node_js:
  - "4.5.0"
build:
  ci:
    # Get and extract BrowserStackLocal
    - wget http://www.browserstack.com/browserstack-local/BrowserStackLocal-linux-x64.zip
    - unzip BrowserStackLocal-linux-x64.zip

    # Start BrowserStackLocal and wait for 10 seconds for the tunnel to come up
    - ./BrowserStackLocal ${BROWSERSTACK_ACCESSKEY} &
    - sleep 10

    # Start the app and wait for 10 seconds
    - npm start &
    - sleep 10
    
    # Run tests
    - npm test